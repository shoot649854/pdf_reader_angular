<div class="dialog-form-container">
  <h2 mat-dialog-title>Form</h2>
  <mat-dialog-content>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <!-- Display form fields for the current page -->
      <div *ngFor="let field of formFields" class="form-field">
        
        <!-- Text Field -->
        <ng-container *ngIf="field.type === 'text'">
          <mat-form-field appearance="outline">
            <mat-label>{{ field.description }}</mat-label>
            <input matInput [formControlName]="field.key" [placeholder]="field.description" />
            <!-- Validation Hint -->
            <mat-hint *ngIf="!form.get(field.key)?.valid && form.get(field.key)?.touched">
              This field is required
            </mat-hint>
          </mat-form-field>
        </ng-container>

        <!-- Checkbox Field -->
        <ng-container *ngIf="field.type === 'checkbox'">
          <mat-checkbox [formControlName]="field.key">{{ field.description }}</mat-checkbox>
        </ng-container>

        <!-- Choice Field -->
        <ng-container *ngIf="field.type === 'choice'">
          <mat-form-field appearance="outline">
            <mat-label>{{ field.label }}</mat-label>
            <mat-select [formControlName]="field.key">
              <mat-option *ngFor="let option of field.options" [value]="option">
                {{ option }}
              </mat-option>
            </mat-select>
            <!-- Validation Hint -->
            <mat-hint *ngIf="!form.get(field.key)?.valid && form.get(field.key)?.touched">
              Please select an option
            </mat-hint>
          </mat-form-field>
        </ng-container>

        <!-- Numeric Field -->
        <ng-container *ngIf="field.type === 'number'">
          <mat-form-field>
            <mat-label>{{ field.description }}</mat-label>
            <input matInput 
                   type="number" 
                   [formControlName]="field.key" 
                   min="0" />
          </mat-form-field>
        </ng-container>
      </div>

      <!-- Pagination Controls -->
      <div class="pagination-controls">
        <button
          mat-raised-button
          (click)="previousPage()"
          [disabled]="currentPage === 1"
        >
          Previous
        </button>
        <span>Page {{ currentPage }} of {{ totalPages }}</span>
        <button
          mat-raised-button
          (click)="nextPage()"
          [disabled]="currentPage === totalPages"
        >
          Next
        </button>
      </div>

      <!-- Dialog Actions (Submit and Cancel Buttons) -->
      <div mat-dialog-actions class="dialog-actions">
        <button mat-button (click)="onClose()">Cancel</button>
        <button mat-raised-button color="primary" type="submit">Submit</button>
      </div>
    </form>
  </mat-dialog-content>
</div>
